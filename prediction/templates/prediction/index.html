{% extends 'base.html' %}

{% block content %}
  <h1>Guess hub</h1>
  <h3>Your rank</h3>
  {% if user_clans %}
  <p>Click on one of your clans to see the ranking:</p>
  <ul>
    {% for user_clan in user_clans %}
    <li><a href="">{{ user_clan.clan }}</a></li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No clan (ie. friend group) found,
     but you can still make predictions now. Create or join a clan at the bottom of the page.
  </p>
  {% endif %}

  <h3>Your guesses</h3>
  <p>Predictions can be modified until the 15th minutes of the corresponding matches.</p>
  <p>Watch the beginning of each match to maximize your chance. And don't forget to click on Submit to save your guesses.</p>
  <form method="post">
    {% csrf_token %}
    <ul>
    {% for match in matches %}
    <li>
	    {{match.start_time}}
    	{{match.team_1}}
    	<input type=text name="{{match.id}}-1" value="{{match.predicted_score_1}}" {% if match.locked %}readonly{% endif %}>
    	-
    	<input type=text name="{{match.id}}-2" value="{{match.predicted_score_2}}" {% if match.locked %}readonly{% endif %}>
    	{{match.team_2}}
    	{% if match.real_score_1 %}
    	(real score: {{match.real_score_1}}-{{match.real_score_2}})
    	{% endif %}
    </li>
    {% endfor %}
    </ul>
    <input type="submit" name="submit_guesses" value="Submit">
  </form>

  <h3>Join a clan</h3>
  <form method="post">
    {% csrf_token %}
    <label for="clan-name-join">Clan name: (case-sensitive) </label><br />
    <input type=text name="clan-name-join"><br />
    <label for="clan-access-code">Access code: </label><br />
    <input type=text name="clan-access-code"><br />
    <input type="submit" name="submit-join-clan" value="Join">
    <p>{{ join_clan_feedback }}</p>
  </form>

  <h3>Create a clan</h3>
  <form method="post">
    {% csrf_token %}
    <label for="clan-name-create" width="300px">Clan name: </label><br />
    <input type=text name="clan-name-create"><br />
    <input type="submit" name="submit-create-clan" value="Create">
    <p>{{ create_clan_feedback }}</p>
  </form>
{% endblock %}
